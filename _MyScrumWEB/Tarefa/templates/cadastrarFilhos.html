{% extends 'base.html' %}{% load static %}

{% block title %} Cadastrar Filhos {% endblock %}

{% block head %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

<!-- CSS da Pagina -->
<link href="{% static '/Tarefa/css/cadastrarTarefas.css' %}" rel="stylesheet">

<!--Usando arquivos da app home para não duplicar arquivos-->
<!-- Script para o funciomento dos DatePickers -->
<script src="{% static 'Home/datepicker/js/bootstrap-datepicker.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment-with-locales.min.js" integrity="sha512-LGXaggshOkD/at6PFNcp2V2unf9LzFq6LE+sChH7ceMTDP0g2kn6Vxwgg7wkPP7AAtX+lmPqPdxB47A0Nz0cMQ==" crossorigin="anonymous"></script>
<script type="text/javascript" src="{% static 'Tarefa/js/datetimepicker.js' %}"></script>

<!-- Script para reconher o PT-BR do DatePickers-->
<script src="{% static 'Home/datepicker/js/bootstrap-datepicker.pt-BR.min.js' %}" charset="UTF-8"></script>

<!-- CSS do DatePickers -->
<link id="bsdp-css" href="{% static 'Home/datepicker/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet">
<link href="{% static 'Tarefa/css/datetimepicker.css' %}" rel="stylesheet" type="text/css"/>

{% endblock %}

{% block content %}

<div class="load" id="load">
    <i class="fa fa-cog fa-spin fa-10x fa-fw"></i><span class="sr-only">Loading...</span>
</div>

{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{message.extra_tags}} alert-dismissible fade show" role="alert">
            <center>{{ message }}</center>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}
{% endif %}

<div class="conteudo" id="conteudo">
    <div class="div-cadastro-form">
        <form class="label" action="{% url 'Tarefa:filhos' tarefa.id_tarefa %}" method="POST">
            {% csrf_token %}
            <div id="blocoConteudo">
                <!-- Tarefa -->
                <div class="tarefa" id="fTarefa">
                    <div class="row">
                        <div class="col-2" id="id">
                            <label for="id_tarefa">ID:</label>
                            <input type="text" value="{{tarefa.id_tarefa}}" id="id_tarefa" readonly="“true”" />
                        </div>
                        <div hidden>
                            {{form.id_update}}
                        </div>
                        <div hidden>
                            {{form.id_pessoa}}
                        </div>
                        <div hidden>
                            {{form.id_empresa}}
                        </div>
                    </div>
                    <div class="row" id="descri">
                        <div class="col">
                            <label for="id_descri">*Descrição:</label>
                            <div class="input-group">
                                <textarea name="descri" rows="4" required="" id="id_descri" value="" maxlength="150"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="prioridade">
                            <label for="id_stats">*Prioridade: </label>
                            <div class="input-group bs-select">
                                {{form.prioridade}}
                            </div>
                        </div>
                        <div class="col" id="status">
                            <label for="id_stats">*Status: </label>
                            <div class="input-group bs-select">
                                {{form.stat}}
                            </div>
                        </div>
                        <div class="col" id="tamanho">
                            <label for="id_tamanho" data-toggle="modal" data-target="#modalTamanho">*Tamanho: </label>
                            <div class="input-group bs-select">
                                {{ form.id_tamanho }}
                            </div>
                        </div>
            
                        <!-- Modal com os valores por tamanho de tarefa. -->
                        <div class="modal fade" id="modalTamanho" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Tamanhos</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Tamanhos</th>
                                                    <th scope="col">Pontos e prazos</th>
                                                    <th scope="col">Critérios</th>
                                                    <th scope="col">Dias trabalhados</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <th scope="row">Baby</th>
                                                    <td>0,33</td>
                                                    <td>Até 20 minutos</td>
                                                    <td>0,04</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">PP</th>
                                                    <td>1</td>
                                                    <td>Até 1 horas</td>
                                                    <td>0,11</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">P</th>
                                                    <td>3</td>
                                                    <td>De 1 à 3 horas</td>
                                                    <td>0,33</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">M</th>
                                                    <td>5</td>
                                                    <td>De 4 à 5 horas</td>
                                                    <td>0,56</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">G</th>
                                                    <td>8</td>
                                                    <td>De 6 à 8 horas</td>
                                                    <td>0,89</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">GG</th>
                                                    <td>13</td>
                                                    <td>De 9 à 13 horas</td>
                                                    <td>1,44</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">EG</th>
                                                    <td>21</td>
                                                    <td>De 14 à 21 horas</td>
                                                    <td>2,33</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante</th>
                                                    <td>34</td>
                                                    <td>De 22 à 34 horas</td>
                                                    <td>3,78</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante 1</th>
                                                    <td>55</td>
                                                    <td>De 34 à 55 horas</td>
                                                    <td>6,11</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante 2</th>
                                                    <td>89</td>
                                                    <td>De 56 à 89 horas</td>
                                                    <td>9,89</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante 3</th>
                                                    <td>144</td>
                                                    <td>De 90 à 144 horas</td>
                                                    <td>13,67</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante 4</th>
                                                    <td>233</td>
                                                    <td>De 145 à 233 horas</td>
                                                    <td>17,44</td>
                                                </tr>
                                                <tr>
                                                    <th scope="row">Gigante 5</th>
                                                    <td>377</td>
                                                    <td>De 234 à 377 horas</td>
                                                    <td>21,22</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal">Fechar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Fim da modal -->
                        <div class="col" id="porcentagem">
                            <label for="id_porcentagem">*Porcentagem:</label>
                            <div class="input-group">
                                {{ form.porcentagem }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 d-flex">
                            <div id="calendario" class="mr-1">
                                <label for="id_bool_calendario">Calendário:</label>
                                <div class="input-group bs-select">
                                    {{ form.calendario }}
                                </div>
                            </div>
                            <div id="data_calendario">
                                <label for="id_data_calendario">Data Calendário:</label>
                                <div class="input-group bs-select">
                                    <div id="id_data_calendario"></div>
                                    <input type="hidden" id="result" name="data_calendario" value="{{tarefa.data_calendario}}" />
                                </div>
                            </div>
                        </div>
                        <div class="col-2" id="dataInicial">
                            <label for="id_data_ini">*Data inicial:</label>
                            <div class="input-group date">
                                <div class="input-group-icon">
                                    {{ form.data_ini }}
                                </div>
                            </div>
                        </div>
                        <div id="dataReal" style="display: none;">
                            <label for="id_data_real">*Data real:</label>
                            <div class="input-group">
                                <div class="input-group-icon">
                                    {{ form.data_real }}
                                </div>
                            </div>
                        </div>
                        <div class="col-2" id="prazo">
                            <label for="id_prazo">*Prazo:</label>
                            <div class="input-group bs-select">
                                <span id="prazoTarefa" style="display: none;">{{tarefa.prazo}}</span>
                                <select type="text" name="prazo" id="id_prazo"></select>
                            </div>
                        </div>
                        <div class="col-2" id="dataFinalizacao">
                            <label for="id_data_finalizacao">*Data fim:</label>
                            <div class="input-group">
                                <div class="input-group-icon">
                                    {{ form.data_finalizacao }}
                                </div>
                            </div>
                        </div>
                        <div class="col-2" id="dataFinal">
                            <label for="id_data_fim">*Data fim real:</label>
                            <div class="input-group">
                                <div class="input-group-icon">
                                    {{ form.data_fim }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="departamento">
                            <label for="id_departamento">*Departamento:</label>
                            <span id="value_departamento" style="display: none;">{{tarefa.id_departamento.id_departamento}}</span>
                            <div class="input-group bs-select">
                                {{ tarefa_form.id_departamento }}
                            </div>
                        </div>
                        <div class="col" id="centroCusto">
                            <label for="id_centro_custo">*Centro de custo:</label>
                            <span id="value_centro_custo" style="display: none;">{{tarefa.id_centro_custo.id_centro_custo}}</span>
                            <div class="input-group bs-select">
                                {{ tarefa_form.id_centro_custo }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="etapa"> 
                            <label id="label-etapa" for="etapa">Etapa:</label>
                            <div class="input-group bs-select">
                                <select name="etapa" id="id_etapa" class="custom-select form-control form-control-sm">
                                    <option value>---------</option>
                                    {% for etapa in etapas %} {% if tarefa.id_centro_custo == etapa.id_cc %} {% if tarefa.etapa == etapa %}
                                    <option value="{{etapa.id_etapa}}" selected>{{ etapa.etapa }}</option>
                                    {% else %}
                                    <option value="{{etapa.id_etapa}}">{{ etapa.etapa }}</option>
                                    {% endif %} {% endif %} {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="col" id="subEtapa">
                            <label id="label-subetapa" for="subetapa">SubEtapa:</label>
                            <div class="input-group bs-select">
                                <select name="subetapa" id="id_subetapa" class="custom-select form-control form-control-sm">
                                    <option value>---------</option>
                                    {% for subetapa in subetapas %} {% if tarefa.etapa == subetapa.id_etapa %} {% if tarefa.subetapa == subetapa %}
                                    <option value="{{subetapa.id_sub_etapas}}" selected>{{ subetapa.sub_etapa }}</option>
                                    {% else %}
                                    <option value="{{subetapa.id_sub_etapas}}">{{ subetapa.sub_etapa }}</option>
                                    {% endif %} {% endif %} {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="autoridade">
                            <label for="autoridade">*Autoridade:</label>
                            <div class="input-group bs-select">
                                {{ tarefa_form.autoridade }}
                            </div>
                        </div>
                        <div class="col" id="responsavel">
                            <label for="responsavel">*Responsável:</label>
                            <div class="input-group bs-select">
                                {{ tarefa_form.responsavel }}
                            </div>
                        </div>
                        <div class="col" id="checado">
                            <label for="checado">Checado:</label>
                            <div class="input-group bs-select">
                                {{ tarefa_form.checado }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="statusPendencia">
                            <label for="id_status_pendencia">Status pendência</label>
                            <div class="input-group">
                                <textarea name="status_pendencia" rows="4" id="id_status_pendencia" value=""></textarea>
                                <button type="button" id="copiar">
                                    Copiar
                                </button>
                            </div>
                        </div>
                        <div class="col" id="historico">
                            <label for="id_historico">Histórico</label>
                            <div class="input-group">
                                <textarea name="historico" rows="4" id="id_historico" value=""></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4" id="impedimento">
                            <label for="id_pendente_por">Impedimento:</label>
                            <div class="input-group bs-select">
                                {{ form.pendente_por }}
                            </div>
                        </div>
                        <div class="col-8" id="processo">
                            <label for="id_processo_relacionado">*Processo relacionado:</label>
                            <span id="value_processo_relacionado" style="display: none;">{{tarefa.processo_relacionado.id_processo}}</span>
                            <div class="input-group bs-select">
                                {{ tarefa_form.processo_relacionado }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4" id="id_statuss">
                            <label for="id_5w2h">Status:</label>
                            <div class="input-group bs-select">
                                <select type="text" name="id_status" id="id_id_status"></select>
                            </div>
                        </div>
                        <div class="col-4" id="r5w2h">
                            <label for="id_5w2h">5W2H:</label>
                            <div class="input-group bs-select">
                                {{ form.r5w2hT }}
                            </div>
                        </div>
                        <div class="col-4" id="retrospectiva">
                            <label for="id_retrospectiva">Retrospectiva:</label>
                            <div class="input-group bs-select">
                            {{ form.retrospec }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" id="executor">
                            <label for="add-executor">*Executores: </label>
                            <button type="button" id="add-executor">
                                <i class="fa fa-plus-circle" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <div class="row" id=Executores>
                        <div class="col executor " id="executor1">
                            <div class="input group bs-select executor">
                                {{ executores_form.executor1 }}
                            </div>
                            <div class=" input-group" id="porcentagem-executor">
                                {{ executores_form.porcento1 }}
                            </div>
                        </div>
                    </div>
                    <div class="row" id="Executores2-4">
                        <div class="col executor" id="executor2" hidden="hidden">
                            <button type="button" id="remove-executor2">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor2" for="executor2"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor2}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento2 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor3" hidden="hidden">
                            <button type="button" id="remove-executor3">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor3" for="executor3"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor3}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento3 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor4" hidden="hidden">
                            <button type="button" id="remove-executor4">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor4" for="executor4"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor4}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento4 }}
                            </div>
                        </div>
            
                    </div>
                    <div class="row" id="Executores5-7">
                        <div class="col executor" id="executor5" hidden="hidden">
                            <button type="button" id="remove-executor5">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor5" for="executor5"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor5}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento5 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor6" hidden="hidden">
                            <button type="button" id="remove-executor6">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor6" for="executor6"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor6}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento6 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor7" hidden="hidden">
                            <button type="button" id="remove-executor7">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor7" for="executor7"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor7}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento7 }}
                            </div>
                        </div>
                    </div>
                    <div class="row" id="Executores8-9">
                        <div class="col executor" id="executor8" hidden="hidden">
                            <button type="button" id="remove-executor8">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor8" for="executor8"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor8}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento8 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor9" hidden="hidden">
                            <button type="button" id="remove-executor9">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor9" for="executor9"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor9}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento9 }}
                            </div>
                        </div>
                        <div class="col executor" id="executor10" hidden="hidden">
                            <button type="button" id="remove-executor10">
                                <i class="fa fa-trash" aria-hidden="true" id="remove-executor10" for="executor10"></i>
                            </button>
                            <div class="input-group bs-select executor">
                                {{ executores_form.executor10}}
                            </div>
                            <div class=" input-group"id="porcentagem-executor">
                                {{ executores_form.porcento10 }}
                            </div>
                        </div>
            
                    </div>
                </div>

                <!-- Anexo -->
                <div class="fAnexo" id="fAnexo">
                    <div class="row">
                        <h1 class="col">Anexos</h1>
                    </div>
                    <div class="row">
                        <p class="col">Em desenvolvimento</p>
                    </div>
                </div>

                <!-- Retrospectiva -->
                <div class="fRetrospectiva" id="fRetrospectiva">
                    <div id="rCabecalho">
                        <div class="row">
                            <span class="col-2" id="wId"
                                title="Atualizado por {{retrospectiva.id_update.nome}} em {{retrospectiva.last_update}}">
                                <label for="id_rTarefa">ID Tarefa:</label>
                                <input name="idTarefa" type="text" value="{{tarefa.id_tarefa}}" id="id_rTarefa"
                                    readonly="true" />
                            </span>
                            <div class="col-7">
                                <label for="id_descri">Descrição:</label>
                                <div class="input-group">
                                    <textarea name="rDescricao" rows="1" required="" id="id_descri"
                                        style="resize: none;" readonly>{{tarefa.descri}}</textarea>
                                </div>
                            </div>
                            <div id="imagensExecutores"></div>
                            <div id="imagensAR">
                                <span id="rResponsavel" class="col-xs p-icone responsavel mr-1"><img id="imgResponsavel"
                                        class="rounded-circle" style="width: 100%; height: 100%"></span>
                                <span id="rAutoridade" class="col-xs p-icone autoridade"><img id="imgAutoridade"
                                        class="rounded-circle" style="width: 100%; height: 100%"></span>
                            </div>
                        </div>
                    </div>
                    <div id="rConteudo">
                        <span class="row" id="rDescri"
                            title="A Retrospectiva do Sprint corresponde à “verificação” do ciclo PDCA de Deming. A chave é chegar à etapa “aja”, àquele kaizen, que vai realmente mudar o processo e torná-lo melhor da próxima vez. Não é suficiente compartilhar como você se sente; você precisa ser capaz de agir.">
                            <div class="col">
                                <label for="id_classificacao">*Descreva o aprimoramento do processo: <span
                                        id="aprimorar"></span></label>
                                <div class="input-group">
                                    <textarea name="classificacao" rows="4" id="id_classificacao" value=""></textarea>
                                </div>
                            </div>
                        </span>
                        <div class="row" id="rDescri">
                            <div class="col-2">
                                <button type="button" id="rCopiar">Copiar</button>
                            </div>
                            <div class="col">
                                <p id="melhoria">Melhoria sugerida por: {{retrospectiva.id_update.nome}} em
                                    {{retrospectiva.last_update}}.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="status">
                                <label for="id_stats">*Status: </label>
                                <div class="input-group bs-select">
                                    {{ form.rStat }}
                                </div>
                            </div>
                            <div class="col" id="responsavelRetrospectiva">
                                <label for="id_responsavel">*Responsável:</label>
                                <div class="input-group bs-select">
                                    {{ form.id_responsavel }}
                                </div>
                            </div>
                            <div class="col" id="retrospectiva">
                                <label for="id_retrospectiva">Retrospectiva:</label>
                                <div class="input-group bs-select">
                                    {{ form.retrospectiva }}
                                </div>
                            </div>
                        </div>
                        <div class="row" id="finalizarRetrospectiva" style="display: none;">
                            <div class="col">
                                <label for="id_finalizar">Finalizar:</label>
                                <div class="input-group bs-select">
                                    {{ form.finalizado }}
                                </div>
                            </div>
                        </div>
                        <span class="row" id="rHistorico"
                            title="Para ser eficaz, essa reunião requer certa dose de maturidade emocional e atmosfera de confiança. O importante é lembrar-se sempre de que você não está procurando culpados; está olhando para o processo. Por que aquilo aconteceu assim? Por que vocênão percebeu aquilo? O que poderia ter acontecido para sermos mais ágeis? É essencial que as pessoas na equipe assumam a responsabilidade pelo processo e seus respectivos resultados, e que busquem soluções como uma equipe. Ao mesmo tempo, elas têm de ter coragem de levantar as questões que realmente as incomodam, de forma que a solução seja orientada, em vez de acusadora. E o restante da equipe precisa ter maturidade para ouvir o feedback, absorvê-lo e procurar uma solução, em vez de assumir uma postura defensiva.">
                            <div class="col">
                                <label for="id_rHistorico">Histórico:</label>
                                <div class="input-group">
                                    <textarea name="rHistorico" rows="4" id="id_rHistorico" value=""></textarea>
                                </div>
                            </div>
                        </span>
                    </div>
                </div>

                <!-- 5W2H -->
                <div class="f5w2h" id="f5w2h">
                    <div id="rCabecalho">
                        <div class="row">
                            <div class="col-2" id="rId">
                                <label for="id_wTarefa">ID Tarefa:</label>
                                <input name="idTarefa" type="text" value="{{tarefa.id_tarefa}}" id="id_wTarefa"
                                    readonly="true" />
                            </div>

                            <div class="col-10" id="rAtualizado">
                                <p id="rAtualizacao">Atualizado por <span id="rNome">{{r5w2h.id_update.nome}}</span> em
                                    <span id="rDataHora">{{r5w2h.last_update}}</span></p>
                            </div>
                        </div>
                    </div>
                    <div id="rConteudo">
                        <div class="row" id="rWhat">
                            <div class="col">
                                <span title="O que?"><label for="id_stats">*What: </label></span>
                                <div class="input-group">
                                    <textarea name="rWhat" rows="2" id="id_rWhat" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rWhy">
                                <span title="Por que?"><label for="id_stats">*Why: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rWhy" rows="2" id="id_rWhy" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rWhere">
                                <span title="Onde?"><label for="id_stats">*Where: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rWhere" rows="1" id="id_rWhere" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rWhen">
                                <span title="Quando?"><label for="id_stats">*When: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rWhen" rows="1" id="id_rWhen" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rWho">
                                <span title="Por quem?"><label for="id_stats">*Who: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rWho" rows="2" id="id_rWho" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rHow">
                                <span title="Como?"><label for="id_stats">*How: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rHow" rows="4" id="id_rHow" value=""></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="rHowMuch">
                                <span title="Quanto? R$"><label for="id_stats">*How Much: </label></span>
                                <div class="input-group bs-select">
                                    <textarea name="rHowMuch" rows="2" id="id_rHowMuch" value=""></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Locação -->
                <div class="locacao" id="locacao">
                    <div class="col" id="blocoLocacao">
                        <label for="id_bloco">Bloco:</label>
                        <div class="input-group bs-select">
                            {{ locacao_form.lBloco }}
                        </div>
                    </div>
                    <div class="col" id="unidadeLocacao">
                        <label for="id_unidade">Unidade:</label>
                        <div class="input-group bs-select">
                            {{ locacao_form.lUnidade }}
                        </div>
                    </div>
                </div>

                <!-- Juridico -->
                <div class="juridico" id="juridico">
                    <!-- Resumo -->
                    <div class="row">
                        <div class="col" id="resumoJuridico">
                            <label for="id_bloco">Resumo:</label>
                            <textarea name="id_resumo_processo" rows="4" id="id_resumo_processo" value="" maxlength="1000">{{juridico.resumo_processo}}</textarea>
                        </div>
                    </div>
                    <!-- Escritório / Advogado / Número Processo  -->
                    <div class="row">
                        <div class="col" id="escritorioJuridico">
                            <label for="id_bloco">Escritório:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.escritorio }}
                            </div>
                        </div>
                        <div class="col" id="advogadoEscritorioJuridico">
                            <label for="id_bloco">Advogado Escritório:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.escritorio_advogado }}
                            </div>
                        </div>
                        <div class="col" id="numero_processoJuridico">
                            <label for="id_bloco">Número do Processo:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.numero_processo }}
                            </div>
                        </div>
                    </div>
                    <!-- Valor Estimado / Valor Causa / Valor Acordo / Prazo -->
                    <div class="row">
                        <div class="col" id="valor_estimadoJuridico">
                            <label for="id_bloco">Valor Estimado:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.valor_estimado }}
                            </div>
                        </div>
                        <div class="col" id="valor_causaJuridico">
                            <label for="id_bloco">Valor da Causa:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.valor_causa }}
                            </div>
                        </div>
                        <div class="col" id="valor_acordoJuridico">
                            <label for="id_bloco">Valor do Acordo:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.valor_acordo }}
                            </div>
                        </div>
                        <div class="col" id="prazo_internoJuridico">
                            <label for="id_bloco">Prazo Interno:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.prazo_interno }}
                            </div>
                        </div>
                    </div>
                    <!-- Perito / Preposto / Torre / Unidade -->
                    <div class="row">
                        <div class="col" id="peritoJuridico">
                            <label for="id_bloco">Perito:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.perito }}
                            </div>
                        </div>
                        <div class="col" id="prepostoJuridico">
                            <label for="id_bloco">Preposto:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.preposto }}
                            </div>
                        </div>
                        <div class="col" id="torreJuridico">
                            <label for="id_bloco">Bloco:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.jBloco }}
                            </div>
                        </div>
                        <div class="col" id="unidadeJuridico">
                            <label for="id_bloco">Unidade:</label>
                            <div class="input-group bs-select">
                                {{ juridico_form.jUnidade }}
                            </div>
                        </div>
                    </div>
                    <!-- Observações -->
                    <div class="row">
                        <div class="col" id="observacoesJuridico">
                            <label for="id_bloco">Observações:</label>
                            <textarea name="id_observacoes" rows="4" id="id_observacoes" value="" maxlength="1000">{{juridico.observacoes}}</textarea>
                        </div>
                    </div>
                    <!-- Autor -->
                    <div style="background-color: #eee; padding: 5px 0;">
                        <div class="row">
                            <div class="col">
                                <label for="autor">Autor:</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2" id="autor1Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor1 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor2Autor" style="display: none"> -->
                            <div class="col-2" id="autor2Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor2 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor3Autor" style="display: none"> -->
                            <div class="col-2" id="autor3Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor3 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor4Autor" style="display: none"> -->
                            <div class="col-2" id="autor4Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor4 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor5Autor" style="display: none"> -->
                            <div class="col-2" id="autor5Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor5 }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <!-- <div class="col-3" id="autor6Autor" style="display: none"> -->
                            <div class="col-2" id="autor6Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor6 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor7Autor" style="display: none"> -->
                            <div class="col-2" id="autor7Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor7 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor8Autor" style="display: none"> -->
                            <div class="col-2" id="autor8Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor8 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor9Autor" style="display: none"> -->
                            <div class="col-2" id="autor9Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor9 }}
                                </div>
                            </div>
                            <!-- <div class="col-3" id="autor10Autor" style="display: none"> -->
                            <div class="col-2" id="autor10Autor" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ autor_form.autor10 }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="assistenteAutorJuridico">
                                <label for="id_bloco">Assistente do Autor:</label>
                                <div class="input-group bs-select">
                                    {{ juridico_form.autor_assistente }}
                                </div>
                            </div>
                            <div class="col" id="advogadoAutorJuridico">
                                <label for="id_bloco">Advogado do Autor:</label>
                                <div class="input-group bs-select">
                                    {{ juridico_form.autor_advogado }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Réu -->
                    <div style="padding: 5px 0;">
                        <div class="row">
                            <div class="col">
                                <label for="autor">Réu:</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2" id="reu1Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu1 }}
                                </div>
                            </div>
                            <div class="col" id="reu2Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu2 }}
                                </div>
                            </div>
                            <div class="col" id="reu3Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu3 }}
                                </div>
                            </div>
                            <div class="col" id="reu4Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu4 }}
                                </div>
                            </div>
                            <div class="col" id="reu5Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu5 }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="reu6Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu6 }}
                                </div>
                            </div>
                            <div class="col" id="reu7Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu7 }}
                                </div>
                            </div>
                            <div class="col" id="reu8Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu8 }}
                                </div>
                            </div>
                            <div class="col" id="reu9Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu9 }}
                                </div>
                            </div>
                            <div class="col" id="reu10Reu" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ reu_form.reu10 }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="assistenteReuJuridico">
                                <label for="id_bloco">Assistente do Réu:</label>
                                <div class="input-group bs-select">
                                    {{ juridico_form.reu_assistente }}
                                </div>
                            </div>
                            <div class="col" id="advogadoReuJuridico">
                                <label for="id_bloco">Advogado do Réu:</label>
                                <div class="input-group bs-select">
                                    {{ juridico_form.reu_advogado }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Testemunhas -->
                    <div style="background-color: #eee; padding: 5px 0;">
                        <div class="row">
                            <div class="col">
                                <label for="autor">Testemunhas:</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="testemunha1Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha1 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha2Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha2 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha3Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha3 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha4Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha4 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha5Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha5 }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" id="testemunha6Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha6 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha7Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha7 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha8Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha8 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha9Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha9 }}
                                </div>
                            </div>
                            <div class="col" id="testemunha10Testemunhas" style="width: 20%!important; flex: 0 0 20%; max-width: 20%;">
                                <div class="input-group bs-select">
                                    {{ testemunhas_form.testemunha10 }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal p/ tela de locação -->
                <div class="modal fade" id="modalLocacao" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Locação</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div id="modal-body-locacao" class="modal-body">
                                <div id="modal-finais">
                                    <div id="modal-finais-esquerdo">
                                        <span id="modal-final-esquerdo">
                                            Finais:
                                        </span>
                                        <input type="radio" name="rd-finais" value="rd-final-esquerdo" checked>
                                    </div>
                                    <div id="modal-finais-direito">
                                        <span id="modal-final-direito">
                                            Finais:
                                        </span>
                                        <input type="radio" name="rd-finais" value="rd-final-direito">
                                    </div>
                                </div>
                                <div id="modal-ambientes">
                                    <div id="modal-cozinha" class="modal-ambiente">
                                        <span>
                                            Cozinha: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Cozinha"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Cozinha">
                                        </span>
                                    </div>
                                    <div id="modal-servico" class="modal-ambiente">
                                        <span>
                                            Área de Serviço: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Área de Serviço"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Área de Serviço">
                                        </span>
                                    </div>
                                    <div id="modal-lavabo" class="modal-ambiente">
                                        <span>
                                            Lavabo: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Box:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Box | Lavabo"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Chuveiro / Ducha:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Chuveiro | Lavabo"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Lavabo">
                                        </span>
                                    </div>
                                    <div id="modal-suite" class="modal-ambiente">
                                        <span>
                                            Suíte: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Suíte">
                                        </span>
                                    </div>
                                    <div id="modal-suite1" class="modal-ambiente">
                                        <span>
                                            Suíte 1: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Suíte 1">
                                        </span>
                                    </div>
                                    <div id="modal-suite2" class="modal-ambiente">
                                        <span>
                                            Suíte 2: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Suíte 2">
                                        </span>
                                    </div>
                                    <div id="modal-dormitorio" class="modal-ambiente">
                                        <span>
                                            Dormitório: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Dormitório"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Dormitório">
                                        </span>
                                    </div>
                                    <div id="modal-dormitorio1" class="modal-ambiente">
                                        <span>
                                            Dormitório 1: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Dormitório 1"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Dormitório 1">
                                        </span>
                                    </div>
                                    <div id="modal-dormitorio2" class="modal-ambiente">
                                        <span>
                                            Dormitório 2: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | Dormitório 2"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | Dormitório 2">
                                        </span>
                                    </div>
                                    <div id="modal-wc-social" class="modal-ambiente">
                                        <span>
                                            WC Social: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Box:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Box | WC Social"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Chuveiro / Ducha:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Chuveiro / Ducha | WC Social"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | WC Social"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | WC Social">
                                        </span>
                                    </div>
                                    <div id="modal-wc-suite" class="modal-ambiente">
                                        <span>
                                            WC Suíte: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Box:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Box | WC Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Chuveiro / Ducha:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Chuveiro / Ducha | WC Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | WC Suíte"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | WC Suíte">
                                        </span>
                                    </div>
                                    <div id="modal-wc-suite1" class="modal-ambiente">
                                        <span>
                                            WC Suíte 1: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Box:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Box | WC Suíte 1"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Chuveiro / Ducha:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Chuveiro / Ducha | WC Suíte 1"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | WC Suíte 1"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | WC Suíte 1">
                                        </span>
                                    </div>
                                    <div id="modal-wc-suite2" class="modal-ambiente">
                                        <span>
                                            WC Suíte 2: <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Box:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Box | WC Suíte 2"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Chuveiro / Ducha:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Chuveiro / Ducha | WC Suíte 2"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Luminárias / Spots:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Luminárias / Spots | WC Suíte 2"> <br>
                                        </span>
                                        <span class="modal-opcoes">
                                            Móveis:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Móveis | WC Suíte 2">
                                        </span>
                                    </div>
                                    <div id="modal-aquecedor" class="modal-ambiente">
                                        <span>
                                            Aquecedor:
                                            <input type="checkbox" name="ambientes" class="cb-locacao"
                                                value="Aquecedor"> <br>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer salvarLocacao">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Salvar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Fim da modal -->

            </div>
            <div id="blocoRodape">
                <div class="row" id="botoes">
                    <div class="col-md-auto salvar">
                        <input class="btn btn-primary" type="submit" id="cadastrar" value="Cadastrar">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block navbar %}

<div class="noselect" id="trocarEdicao">
    <span class="trocarEdicao" id="trocarTarefa" title="Ir para: Tarefa">Tarefa</span>
    <h5 class="barraEdicao" style="display: none;">|</h5>
    <span class="trocarEdicao" id="trocarAnexo" title="Ir para: Anexo" style="display: none;">Anexo</span>
    <h5 class="barraEdicao" id="barraRetrospectiva">|</h5>
    <span class="trocarEdicao" id="trocarRetrospectiva" title="Ir para: Retrospectiva">Retrospectiva</span>
    <h5 class="barraEdicao" id="barra5w2h">|</h5>
    <span class="trocarEdicao" id="trocar5w2h" title="Ir para: 5w2h">5W2H</span>
    <h5 class="barraEdicao" id="barraLocacao">|</h5>
    <span class="trocarEdicao" id="trocarLocacao" title="Ir para: Locação">Locação</span>
    <h5 class="barraEdicao" id="barraJuridico">|</h5>
    <span class="trocarEdicao" id="trocarJuridico" title="Ir para: Jurídico">Jurídico</span>
</div>

{% endblock %}

{% block scripts %}

<!--JS do campo executor -->
<script src="{% static 'Tarefa/js/executores.js' %}"></script>
<!-- JS da exibição da tela -->
<script src="{% static 'Tarefa/js/exibirTarefa.js' %}"></script>

<script>
  $(function(){
    $("#id_porcentagem.form-control.form-control-sm").prop("type", "number");

    //Criação de variável temporária para guardar último impedimento
    let temporario;
    $("#id_stat").change(function(){
      //Se Status for alterado para Feito
      if ($("#id_stat").val() == 'Feito'){
        //Guarda impedimento na variável e limpa campo impedimento
        temporario = $("#id_pendente_por").val();
        $("#id_pendente_por").val("");
      } else {
        //Se outro Status for selecionado impedimento recebe o valor antigo
        $("#id_pendente_por").val(temporario);
      }
    });
  });
</script>

<!-- JS para alterar o CSS dos campos de executores -->
<script>
$('#id_id_departamento').addClass('custom-select custom-select form-control form-control-sm')
$('#id_id_centro_custo').addClass('custom-select custom-select form-control form-control-sm')
$('#id_prioridade').addClass('custom-select custom-select form-control form-control-sm')
$('#id_stat').addClass('custom-select custom-select form-control form-control-sm')
$('#id_id_tamanho').addClass('custom-select custom-select form-control form-control-sm')

$('#id_prazo').addClass('custom-select custom-select form-control form-control-sm')
$('#id_etapa').addClass('custom-select custom-select form-control form-control-sm')
$('#id_subetapa').addClass('custom-select custom-select form-control form-control-sm')
$('#id_autoridade').addClass('custom-select custom-select form-control form-control-sm')
$('#id_responsavel').addClass('custom-select custom-select form-control form-control-sm')
$('#id_checado').addClass('custom-select custom-select form-control form-control-sm')

$('#id_calendario').addClass('custom-select custom-select form-control form-control-sm')
$('#id_data_calendario').addClass('form-control form-control-sm')
$('#id_data_calendario').attr('autocomplete', 'off')

$('#id_data_ini').addClass('form-control form-control-sm')
$('#id_data_ini').attr('autocomplete', 'off')

$('#id_data_real').addClass('form-control form-control-sm')
$('#id_data_real').attr('autocomplete', 'off')
$('#id_data_real').attr('readonly', 'true')

$('#id_data_fim').addClass('form-control form-control-sm')
$('#id_data_fim').attr('autocomplete', 'off')
$('#id_data_fim').attr('readonly', 'true')

$('#id_data_finalizacao').addClass('form-control form-control-sm')
$('#id_data_finalizacao').attr('autocomplete', 'off')
$('#id_data_finalizacao').attr('readonly', 'true')

$('#id_pendente_por').addClass('custom-select custom-select form-control form-control-sm')
$('#id_processo_relacionado').addClass('custom-select custom-select form-control form-control-sm')

$('#id_r5w2hT').addClass('custom-select custom-select form-control form-control-sm')
$('#id_retrospec').addClass('custom-select custom-select form-control form-control-sm')

$('.executor > select').addClass('custom-select custom-select form-control form-control-sm')

$('#porcentagem-executor > input').addClass('form-control form-control-sm')
$('#porcentagem-executor > input').attr("onkeypress", "return event.charCode >= 48 && event.charCode <= 57")

$('#id_porcentagem').addClass('form-control form-control-sm')
$('#id_porcentagem').attr("min","0")
$('#id_porcentagem').attr("max","100")
$('#id_porcentagem').attr("maxlength","3")
$('#id_porcentagem').attr("type","text")
$('#id_porcentagem').attr("onkeypress", "return event.charCode >= 48 && event.charCode <= 57")

// Retrospectiva
$('#id_rTarefa').addClass('form-control form-control-sm')
$('#id_rStat').addClass('form-control form-control-sm')
$('#id_id_responsavel').addClass('form-control form-control-sm')
$('#id_retrospectiva').addClass('form-control form-control-sm')

// 5W2H
$('#id_rWhat').addClass('form-control form-control-sm')
$('#id_rWhy').addClass('form-control form-control-sm')
$('#id_rWhere').addClass('form-control form-control-sm')
$('#id_rWhen').addClass('form-control form-control-sm')
$('#id_rWho').addClass('form-control form-control-sm')
$('#id_rHow').addClass('form-control form-control-sm')
$('#id_rHowMuch').addClass('form-control form-control-sm')

// Juridico
$('#id_resumo_processo').addClass('form-control form-control-sm')
$('#id_escritorio').addClass('form-control form-control-sm')
$('#id_numero_processo').addClass('form-control form-control-sm')
$('#id_id_status').addClass('form-control form-control-sm')
$('#id_prazo_interno').addClass('form-control form-control-sm')
$('#id_valor_estimado').addClass('form-control form-control-sm')
$('#id_valor_causa').addClass('form-control form-control-sm')
$('#id_valor_acordo').addClass('form-control form-control-sm')
$('#id_perito').addClass('form-control form-control-sm')
$('#id_preposto').addClass('form-control form-control-sm')
$('#id_jBloco').addClass('form-control form-control-sm')
$('#id_jUnidade').addClass('form-control form-control-sm')
$('#id_observacoes').addClass('form-control form-control-sm')
$('#id_escritorio_advogado').addClass('form-control form-control-sm')
$('#id_autor1').addClass('form-control form-control-sm')
$('#id_autor2').addClass('form-control form-control-sm')
$('#id_autor3').addClass('form-control form-control-sm')
$('#id_autor4').addClass('form-control form-control-sm')
$('#id_autor5').addClass('form-control form-control-sm')
$('#id_autor6').addClass('form-control form-control-sm')
$('#id_autor7').addClass('form-control form-control-sm')
$('#id_autor8').addClass('form-control form-control-sm')
$('#id_autor9').addClass('form-control form-control-sm')
$('#id_autor10').addClass('form-control form-control-sm')
$('#id_autor_assistente').addClass('form-control form-control-sm')
$('#id_autor_advogado').addClass('form-control form-control-sm')
$('#id_reu1').addClass('form-control form-control-sm')
$('#id_reu2').addClass('form-control form-control-sm')
$('#id_reu3').addClass('form-control form-control-sm')
$('#id_reu4').addClass('form-control form-control-sm')
$('#id_reu5').addClass('form-control form-control-sm')
$('#id_reu6').addClass('form-control form-control-sm')
$('#id_reu7').addClass('form-control form-control-sm')
$('#id_reu8').addClass('form-control form-control-sm')
$('#id_reu9').addClass('form-control form-control-sm')
$('#id_reu10').addClass('form-control form-control-sm')
$('#id_reu_assistente').addClass('form-control form-control-sm')
$('#id_reu_advogado').addClass('form-control form-control-sm')
$('#id_testemunha1').addClass('form-control form-control-sm')
$('#id_testemunha2').addClass('form-control form-control-sm')
$('#id_testemunha3').addClass('form-control form-control-sm')
$('#id_testemunha4').addClass('form-control form-control-sm')
$('#id_testemunha5').addClass('form-control form-control-sm')
$('#id_testemunha6').addClass('form-control form-control-sm')
$('#id_testemunha7').addClass('form-control form-control-sm')
$('#id_testemunha8').addClass('form-control form-control-sm')
$('#id_testemunha9').addClass('form-control form-control-sm')
$('#id_testemunha10').addClass('form-control form-control-sm')

</script>

<script>
$('#id_data_ini').datepicker({
    todayBtn: "linked",
    language: "pt-BR",
    daysOfWeekDisabled: "0,6",
    daysOfWeekHighlighted: "1,2,3,4,5",
    autoclose: true,
    todayHighlight: true
});

$('#id_data_calendario').dateTimePicker();
    
    $('#id_calendario').val() == 0 ? $("#data_calendario").css('display', 'none') : $("#data_calendario").css('display', 'block');
    $('#id_calendario').change(() => {
        $('#id_calendario').val() == 0 ? $("#data_calendario").css('display', 'none') : $("#data_calendario").css('display', 'block');
        if($('#id_calendario').val() == 1 ){
            let data = $("#id_date_calendario").text().split('-');
            let hora = $("#id_hora_calendario").text().split(':');
            $("#result").val(`${data[0]}-${data[1]}-${data[2]} ${hora[0]}:${hora[1]}:00`);
        }
    })

$('#id_data_abertura').datepicker({
        todayBtn: "linked",
        language: "pt-BR",
        daysOfWeekDisabled: "0,6",
        daysOfWeekHighlighted: "1,2,3,4,5",
        autoclose: true,
        todayHighlight: true
    });

$('#id_data_atendimento').datepicker({
    todayBtn: "linked",
    language: "pt-BR",
    daysOfWeekDisabled: "0,6",
    daysOfWeekHighlighted: "1,2,3,4,5",
    autoclose: true,
    todayHighlight: true
});

$('#id_data_finalizacao_sat').datepicker({
    todayBtn: "linked",
    language: "pt-BR",
    daysOfWeekDisabled: "0,6",
    daysOfWeekHighlighted: "1,2,3,4,5",
    autoclose: true,
    todayHighlight: true
});

$('#id_data_entrega').datepicker({
    todayBtn: "linked",
    language: "pt-BR",
    daysOfWeekDisabled: "0,6",
    daysOfWeekHighlighted: "1,2,3,4,5",
    autoclose: true,
    todayHighlight: true
});

$('#id_prazo_interno').datepicker({
    todayBtn: "linked",
    language: "pt-BR",
    daysOfWeekDisabled: "0,6",
    daysOfWeekHighlighted: "1,2,3,4,5",
    autoclose: true,
    todayHighlight: true
});

function dataFinal(){
    var prazo = parseInt(document.getElementById('id_prazo').value)

    if (document.getElementById('id_data_real').value != ''){
        var arrDataReal = document.getElementById('id_data_real').value.split('/');
        var stringFormatada = arrDataReal[1] + '-' + arrDataReal[0] + '-' +arrDataReal[2];
        var data_real = new Date(stringFormatada);

        data_real.setDate(data_real.getDate() + parseInt(prazo));

        var dia=data_real.getDate();
        var mes=data_real.getMonth() + 1;
        var ano=data_real.getFullYear();

        if (parseInt(dia) < 10) {
            dia = '0' + dia;
        }

        if (parseInt(mes) < 10){
            mes = '0'+ mes;
        }

        document.getElementById('id_data_fim').value = dia+"/"+mes+"/"+ano;
        document.getElementById('id_data_finalizacao').value = dia+"/"+mes+"/"+ano;
    }
}

function dataReal(){
    var data_inicial = document.getElementById('id_data_ini').value;

    $('#id_data_real').datepicker('destroy');

    $('#id_data_real').datepicker({
        startDate: data_inicial,
        todayBtn: "linked",
        language: "pt-BR",
        daysOfWeekDisabled: "0,6",
        daysOfWeekHighlighted: "1,2,3,4,5",
        autoclose: true,
        todayHighlight: true
    });

    var arrDataIni = document.getElementById('id_data_ini').value.split('/');
    var stringFormatada = arrDataIni[1] + '-' + arrDataIni[0] + '-' +arrDataIni[2];
    var data_ini = new Date(stringFormatada);
    $('#id_data_real').datepicker('setDate', data_ini);

    $('#id_data_real').datepicker('destroy');

}

function habilitarDataFinal(){
    var data_fim = document.getElementById('id_data_fim');
    data_fim.removeAttribute('readonly');
    $('#id_data_fim').datepicker('destroy');

    var data_real = document.getElementById('id_data_real').value;

    $('#id_data_fim').datepicker({
        startDate: data_real,
        todayBtn: "linked",
        language: "pt-BR",
        daysOfWeekDisabled: "0,6",
        daysOfWeekHighlighted: "1,2,3,4,5",
        autoclose: true,
        todayHighlight: true
    });

    var hoje = new Date();
    $('#id_data_fim').datepicker('setDate', hoje);
}

function habilitarDataReal(){
    var data_real = document.getElementById('id_data_real');
    data_real.removeAttribute('readonly');
    $('#id_data_real').datepicker('destroy');

    var data_ini = document.getElementById('id_data_ini').value;

    $('#id_data_real').datepicker({
        startDate: data_ini,
        todayBtn: "linked",
        language: "pt-BR",
        daysOfWeekDisabled: "0,6",
        daysOfWeekHighlighted: "1,2,3,4,5",
        autoclose: true,
        todayHighlight: true
    });
}

function desabilitarDataFinal(){
    $('#id_data_fim').attr('readonly', 'true');
    $('#id_data_fim').datepicker('destroy');
}

function desabilitarDataReal(){
    $('#id_data_real').attr('readonly', 'true');
    $('#id_data_real').datepicker('destroy');
}

var data_ini_antiga = document.getElementById('id_data_ini').value;
var data_ini_nova = document.getElementById('id_data_ini').value;

function ControlTimerDataIni(){
    data_ini_nova = document.getElementById('id_data_ini').value;
    if(data_ini_nova != data_ini_antiga){
        dataReal();
        dataFinal();
        data_ini_antiga = data_ini_nova;
    }

    setTimeout("ControlTimerDataIni()",100)
}
ControlTimerDataIni()

var data_real_antiga = document.getElementById('id_data_real').value;
var data_real_nova = document.getElementById('id_data_real').value;

function ControlTimerDataReal(){
    data_real_nova = document.getElementById('id_data_real').value;
    if(data_real_nova != data_real_antiga){
        dataFinal();
        if (document.getElementById('id_stat').value == 'Feito'){
            habilitarDataFinal();
            habilitarDataReal();
        }
        data_real_antiga = data_real_nova;
    }

    setTimeout("ControlTimerDataReal()",100)
}
ControlTimerDataReal()

var prazo_antigo = document.getElementById('id_prazo').value;
var prazo_novo = document.getElementById('id_prazo').value;

function ControlTimerPrazo(){
    prazo_novo = document.getElementById('id_prazo').value;
    if(prazo_novo != prazo_antigo){
        dataFinal();
        prazo_antigo = prazo_novo;
    }

    setTimeout("ControlTimerPrazo()",100)
}
ControlTimerPrazo()

var status_antigo = document.getElementById('id_stat').value;
var status_novo = document.getElementById('id_stat').value;

function ControlTimerStatus(){
    status_novo = document.getElementById('id_stat').value;
    porcentagem = document.getElementById('id_porcentagem');
    if(status_novo != status_antigo){
        if (status_novo == 'A fazer'){
            porcentagem.value = 0;
            dataFinal();
            desabilitarDataFinal();
            dataReal();
            desabilitarDataReal();
        } else if (status_novo == 'Fazendo'){
            porcentagem.value = 1;
            dataFinal();
            desabilitarDataFinal();
            dataReal();
            desabilitarDataReal();
        } else if (status_novo == 'Feito'){
            porcentagem.value = 100;
            habilitarDataFinal();
            habilitarDataReal();
        }
        status_antigo = status_novo;
    }

    setTimeout("ControlTimerStatus()",100)
}
ControlTimerStatus()

var porcentagem_nova = parseInt(document.getElementById('id_porcentagem').value);
var porcentagem_antiga = parseInt(document.getElementById('id_porcentagem').value);
var porcentagem = document.getElementById('id_porcentagem');

function ControlTimerPorcentagem(){
    porcentagem_nova = parseInt(document.getElementById('id_porcentagem').value);

    if(porcentagem_nova != porcentagem_antiga){
        if (porcentagem_nova > 100){
            if (document.getElementById('id_stat').value == 'A fazer'){
                porcentagem.value = 0;
            } else if (document.getElementById('id_stat').value == 'Fazendo'){
                porcentagem.value = 1;
            } else if (document.getElementById('id_stat').value == 'Feito'){
                porcentagem.value = 100;
            }
        } else if (porcentagem_nova < 0){
            if (document.getElementById('id_stat').value == 'A fazer'){
                porcentagem.value = 0;
            } else if (document.getElementById('id_stat').value == 'Fazendo'){
                porcentagem.value = 1;
            } else if (document.getElementById('id_stat').value == 'Feito'){
                porcentagem.value = 100;
            }
        } else if (porcentagem_nova >= 0 && porcentagem_nova <= 100){
            if (document.getElementById('id_stat').value == 'A fazer'){
                porcentagem.value = 0;
            } else if (document.getElementById('id_stat').value == 'Fazendo'){
                if (porcentagem_nova == 0 || porcentagem_nova == 00 || porcentagem_nova == 000){
                    porcentagem.value = 1;
                } else if (porcentagem_nova === 100){
                    porcentagem.value = 99;
                }
            } else if (document.getElementById('id_stat').value == 'Feito'){
                porcentagem.value = 100;
            }
        }
        porcentagem_antiga = porcentagem_nova;
    }

    setTimeout("ControlTimerPorcentagem()",100)
}
ControlTimerPorcentagem()

var porcentagem_executor1 = document.getElementById('id_porcento1')
var porcentagem_executor2 = document.getElementById('id_porcento2')
var porcentagem_executor3 = document.getElementById('id_porcento3')
var porcentagem_executor4 = document.getElementById('id_porcento4')
var porcentagem_executor5 = document.getElementById('id_porcento5')
var porcentagem_executor6 = document.getElementById('id_porcento6')
var porcentagem_executor7 = document.getElementById('id_porcento7')
var porcentagem_executor8 = document.getElementById('id_porcento8')
var porcentagem_executor9 = document.getElementById('id_porcento9')
var porcentagem_executor10 = document.getElementById('id_porcento10')

function ControlTimerPorcentagemExecutor(){

    porcentagem_executor1 = document.getElementById('id_porcento1')

    if (parseInt(porcentagem_executor1.value) > 100){
        porcentagem_executor1.value = 100;
    } else if (parseInt(porcentagem_executor1.value) <  0){
        porcentagem_executor1.value = 0;
    }

    porcentagem_executor2 = document.getElementById('id_porcento2')

    if (parseInt(porcentagem_executor2.value) > 100){
        porcentagem_executor2.value = 100;
    } else if (parseInt(porcentagem_executor2.value) <  0){
        porcentagem_executor2.value = 0;
    }

    porcentagem_executor3 = document.getElementById('id_porcento3')

    if (parseInt(porcentagem_executor3.value) > 100){
        porcentagem_executor3.value = 100;
    } else if (parseInt(porcentagem_executor3.value) <  0){
        porcentagem_executor3.value = 0;
    }

    porcentagem_executor4 = document.getElementById('id_porcento4')

    if (parseInt(porcentagem_executor4.value) > 100){
        porcentagem_executor4.value = 100;
    } else if (parseInt(porcentagem_executor4.value) <  0){
        porcentagem_executor4.value = 0;
    }

    porcentagem_executor5 = document.getElementById('id_porcento5')

    if (parseInt(porcentagem_executor5.value) > 100){
        porcentagem_executor5.value = 100;
    } else if (parseInt(porcentagem_executor5.value) <  0){
        porcentagem_executor5.value = 0;
    }

    porcentagem_executor6 = document.getElementById('id_porcento6')

    if (parseInt(porcentagem_executor6.value) > 100){
        porcentagem_executor6.value = 100;
    } else if (parseInt(porcentagem_executor6.value) <  0){
        porcentagem_executor6.value = 0;
    }

    porcentagem_executor7 = document.getElementById('id_porcento7')

    if (parseInt(porcentagem_executor7.value) > 100){
        porcentagem_executor7.value = 100;
    } else if (parseInt(porcentagem_executor7.value) <  0){
        porcentagem_executor7.value = 0;
    }

    porcentagem_executor8 = document.getElementById('id_porcento8')

    if (parseInt(porcentagem_executor8.value) > 100){
        porcentagem_executor8.value = 100;
    } else if (parseInt(porcentagem_executor8.value) <  0){
        porcentagem_executor8.value = 0;
    }

    porcentagem_executor9 = document.getElementById('id_porcento9')

    if (parseInt(porcentagem_executor9.value) > 100){
        porcentagem_executor9.value = 100;
    } else if (parseInt(porcentagem_executor9.value) <  0){
        porcentagem_executor9.value = 0;
    }

    porcentagem_executor10 = document.getElementById('id_porcento10')

    if (parseInt(porcentagem_executor10.value) > 100){
        porcentagem_executor10.value = 100;
    } else if (parseInt(porcentagem_executor10.value) <  0){
        porcentagem_executor10.value = 0;
    }

    setTimeout("ControlTimerPorcentagemExecutor()",100)
}
ControlTimerPorcentagemExecutor()

function removerElementos(select){
    //Removendo todos option atualmente na combo
    while (select.length != 1) {
        select.remove(select.length-1);
    }

    $(select).attr('readonly', 'true');
}

var ccSelect = document.getElementById('id_id_centro_custo');
removerElementos(document.getElementById('id_etapa'))

var cc_antigo = ccSelect.options[ccSelect.selectedIndex].value;
var cc_novo = ccSelect.options[ccSelect.selectedIndex].value;

function ControlCC(){
    var cc_novo = ccSelect.options[ccSelect.selectedIndex].value;
    var selectEtapa = document.getElementById('id_etapa');

    if (cc_antigo != cc_novo){
        if (ccSelect.selectedIndex == 0){
            removerElementos(selectEtapa);
        } else {
            cc_antigo = cc_novo;

            url = "{% url 'Tarefa:getEtapa' %}"
            url_completa = url+cc_novo

            $.ajax({
            type: 'GET',
            url: url_completa,
            dataType: 'json',
            success: function (data){
                var etapas = JSON.parse(data);

                removerElementos(selectEtapa);

                // Preenchendo a combos com as etapa vinculadas ao CC escolhido
                for (indice in etapas){
                    var elem = document.createElement('option')
                    elem.value = etapas[indice].pk ;
                    elem.text  = etapas[indice].fields.etapa;
                    selectEtapa.add(elem, selectEtapa.options[indice+1]);
                }

                $(selectEtapa).removeAttr('readonly');

            },
            });
        }
    }

    setTimeout("ControlCC()",100)
}
ControlCC()

var etapaSelect = document.getElementById('id_etapa');
removerElementos(document.getElementById('id_subetapa'))

var etapa_antigo = etapaSelect.options[etapaSelect.selectedIndex].value;
var etapa_novo = etapaSelect.options[etapaSelect.selectedIndex].value;

function ControlEtapa(){
    var etapa_novo = etapaSelect.options[etapaSelect.selectedIndex].value;
    var selectSubEtapa = document.getElementById('id_subetapa');

    if (etapa_antigo != etapa_novo){
        if (etapaSelect.selectedIndex == 0){
            removerElementos(selectSubEtapa);
        } else {
            etapa_antigo = etapa_novo;

            url = "{% url 'Tarefa:getSubEtapa' %}"
            url_completa = url+etapa_novo

            $.ajax({
            type: 'GET',
            url: url_completa,
            dataType: 'json',
            success: function (data){
                var subetapas = JSON.parse(data);

                removerElementos(selectSubEtapa);

                // Preenchendo a combos com as etapa vinculadas ao CC escolhido
                for (indice in subetapas){
                    var elem = document.createElement('option')
                    elem.value = subetapas[indice].pk ;
                    elem.text  = subetapas[indice].fields.sub_etapa;
                    selectSubEtapa.add(elem, selectSubEtapa.options[indice+1]);
                }

                $(selectSubEtapa).removeAttr('readonly');

            },
            });
        }
    }

    setTimeout("ControlEtapa()",100)
}
ControlEtapa()
if ($("#id_r5w2hT").val() != 0) {
    $("#id_rWhat").prop("required", true);
    $("#id_rWhy").prop("required", true);
    $("#id_rWhere").prop("required", true);
    $("#id_rWhen").prop("required", true);
    $("#id_rWho").prop("required", true);
    $("#id_rHow").prop("required", true);
    $("#id_rHowMuch").prop("required", true);
}

$("#id_r5w2hT").change(function () {
    if ($("#id_r5w2hT").val() != 0) {
        $("#id_rWhat").prop("required", true);
        $("#id_rWhy").prop("required", true);
        $("#id_rWhere").prop("required", true);
        $("#id_rWhen").prop("required", true);
        $("#id_rWho").prop("required", true);
        $("#id_rHow").prop("required", true);
        $("#id_rHowMuch").prop("required", true);
    } else {
        $("#id_rWhat").removeAttr("required");
        $("#id_rWhy").removeAttr("required");
        $("#id_rWhere").removeAttr("required");
        $("#id_rWhen").removeAttr("required");
        $("#id_rWho").removeAttr("required");
        $("#id_rHow").removeAttr("required");
        $("#id_rHowMuch").removeAttr("required");
    }
});

if ($("#id_retrospec").val() != 0) {
    $("#id_classificacao").prop("required", true);
    $("#id_id_responsavel").prop("required", true);
}

$("#id_retrospec").change(function () {
    if ($("#id_retrospec").val() != 0) {
        $("#id_classificacao").prop("required", true);
        $("#id_id_responsavel").prop("required", true);
    } else {
        $("#id_classificacao").removeAttr("required");
        $("#id_id_responsavel").removeAttr("required");
    }
});

$("#id_id_departamento").val($("#value_departamento").html());
$("#id_processo_relacionado").val($("#value_processo_relacionado").html());
$("#id_id_centro_custo").val($("#value_centro_custo").html());

var optionProcessoSAT = `
<option value="Análise">Análise</option>
<option value="Agendamento">Agendamento</option>
<option value="Atendimento">Atendimento</option>
<option value="Termo de Quitação">Termo de Quitação</option>
<option value="Jurídico">Jurídico</option>
<option value="Concluído">Concluído</option>
<option value="Fora de Garantia">Fora de Garantia</option>
<option value="Cancelado">Cancelado</option>
`;
var optionStatusLocacao = `
<option value="3">Ligação de Energia</option>
<option value="10">Manutenção</option>
<option value="4">Orçar</option>
<option value="5">Pagar</option>
<option value="6">Instalar</option>
<option value="7">Limpar</option>
<option value="8">Vistoria</option>
`;
var optionJuridico = `
<option value="2">Petição Inicial</option>
<option value="3">Defesa</option>
<option value="4">Réplica</option>
<option value="5">Audiência</option>
<option value="6">Alegações Finais</option>
<option value="7">Sentenças</option>
<option value="8">Recurso 2ª Instância</option>
<option value="9">Recurso 3ª Instância</option>
`;

if($("#id_processo_relacionado").val() == 63){
    $("#id_id_status").html(optionStatusLocacao)
} else if($("#id_processo_relacionado").val() == 75){
    $("#id_id_status").html(optionProcessoSAT)
} else if($("#id_processo_relacionado").val() == 23){
    $("#id_id_status").html(optionJuridico)
} else {
    $("#id_statuss").attr('style', 'display: none')
}

$("#id_processo_relacionado").change(function(){
    if($("#id_processo_relacionado").val() == 63){
        $("#id_id_status").html(optionStatusLocacao);
        $("#id_statuss").attr('style', 'display: block');
    } else if($("#id_processo_relacionado").val() == 75){
        $("#id_id_status").html(optionProcessoSAT);
        $("#id_statuss").attr('style', 'display: block');
    } else if($("#id_processo_relacionado").val() == 23){
        $("#id_id_status").html(optionJuridico);
        $("#id_statuss").attr('style', 'display: block');
    } else{
        $("#id_statuss").attr('style', 'display: none');
    }
});

</script>

<script>
function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
}
//Codigo do Loading
$(document).ready(function() {
    sleep(1500);
    document.getElementById("load").classList.toggle('esconder');
    document.getElementById("conteudo").classList.toggle('mostrar');
    $("#load").attr("hidden", true);
    $("#id_porcentagem").val(0);

});
</script>

<script>
var dptoSelect = document.getElementById('id_id_departamento');

var dpto_antigo = dptoSelect.options[dptoSelect.selectedIndex].text;
var dpto_novo = dptoSelect.options[dptoSelect.selectedIndex].text;

$(document).ready(function() {
    if (dptoSelect.options[dptoSelect.selectedIndex].text == "Obra"){
        $("#id_etapa").attr("required", "");
        document.getElementById("label-etapa").innerHTML = "*Etapa:";

        $("#id_subetapa").attr("required", "");
        document.getElementById("label-subetapa").innerHTML = "*SubEtapa:";
    }
});

function ControlDepartamento(){
    var dpto_novo = dptoSelect.options[dptoSelect.selectedIndex].text;

    if (dpto_antigo != dpto_novo){
        dpto_antigo = dpto_novo;
        if (dpto_novo == 'Obra'){
            $("#id_etapa").attr("required", "");
            document.getElementById("label-etapa").innerHTML = "*Etapa:";

            $("#id_subetapa").attr("required", "");
            document.getElementById("label-subetapa").innerHTML = "*SubEtapa:";

        } else {
            $("#id_etapa").removeAttr("required");
            document.getElementById("label-etapa").innerHTML = "Etapa:";

            $("#id_subetapa").removeAttr("required");
            document.getElementById("label-subetapa").innerHTML = "SubEtapa:";
        }
    }

    setTimeout("ControlDepartamento()",100)
}
ControlDepartamento()
</script>

<script>
    $(document).ready(function() {
        $("#id_id_update").val({{usuario.id_pessoa}});
        $("#id_id_pessoa").val({{usuario.id_pessoa}});
        $("#id_prazo").val(0);
    });
</script>
{% endblock %}
